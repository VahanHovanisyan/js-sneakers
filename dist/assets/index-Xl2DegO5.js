import{c as e,a as g,f as w}from"./index-Ci18AaFk.js";const L="_hero_vjenf_1",S="_content_vjenf_5",y="_title_vjenf_12",C="_catalog_vjenf_20",b={hero:L,content:S,title:y,catalog:C},E="_card_16c56_1",T="_link_16c56_17",N="_btn_16c56_30",j="_btnFavorite_16c56_35",A="_bottom_16c56_52",U="_priceText_16c56_58",F="_priceNumber_16c56_66",I="_btnChecked_16c56_73",q="_img_16c56_88",M="_title_16c56_94",P="_icon_16c56_103",$="_icon_checked_16c56_108",H="_load_16c56_113",O="_load_img_16c56_119",R="_load_text_16c56_125",s={card:E,link:T,btn:N,btnFavorite:j,bottom:A,priceText:U,priceNumber:F,btnChecked:I,img:q,title:M,icon:P,icon_checked:$,load:H,load_img:O,load_text:R};function B({id:r="",title:o="",titleSmall:l="",imgUrl:h="",price:k="",onAddToCart:p=()=>{},onAddToFavorite:v=()=>{}}={}){const c=e({tag:"article",classList:[s.card],attributes:{"data-card":r}});e({tag:"a",classList:[s.link],parent:c});const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add(s.icon);const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.classList.add(s.icon_checked);const d=document.createElementNS("http://www.w3.org/2000/svg","use"),n=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg/sprite.svg#favorite"),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg/sprite.svg#cardUnChecked"),g.forEach(_=>{_.id===r&&n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg/sprite.svg#cardChecked")}),w.forEach(_=>{_.id===r&&d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg/sprite.svg#favoriteActive")}),t.appendChild(d),m.appendChild(n);let a=!1;e({tag:"button",classList:[s.btnFavorite,s.btn,"buttonReset"],params:{onclick:()=>{var _;d.getAttribute("xlink:href")==="img/svg/sprite.svg#favoriteActive"&&(a=!0,window.location.href.includes("favorite")&&((_=c.parentElement)==null||_.remove())),a=!a,v(),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a?"img/svg/sprite.svg#favoriteActive":"img/svg/sprite.svg#favorite")}},parent:window.location.pathname==="/profile"?null:c}).append(t),h?e({tag:"img",classList:[s.img],params:{src:h,alt:l},parent:c}):e({tag:"div",classList:[s.load,s.load_img],parent:c});const u=e({tag:"div",classList:[s.bottom],parent:c});let f=!1;return e({tag:"button",classList:[s.btnChecked,s.btn,"buttonReset"],params:{onclick:()=>{n.getAttribute("xlink:href")==="img/svg/sprite.svg#cardChecked"?f=!0:f=!1,f=!f,p(),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f?"img/svg/sprite.svg#cardChecked":"img/svg/sprite.svg#cardUnChecked")}},parent:window.location.pathname==="/profile"?null:u}).append(m),o&&l?e({tag:"h3",classList:[s.title],params:{textContent:l+o},parent:c}):e({tag:"div",classList:[s.load,s.load_text],parent:c}),e({tag:"span",classList:[s.priceText],params:{textContent:"Цена:"},parent:u}),k?e({tag:"span",classList:[s.priceNumber],params:{textContent:k},parent:u}):e({tag:"div",classList:[s.load,s.load_text],parent:u}),c}function D(){const r=e({tag:"label",classList:["search"],params:{innerHTML:`
        <svg class="search__icon">
          <use xlink:href="img/svg/sprite.svg#search"></use>
        </svg>
        <input class="search__input" type="text" placeholder="Поиск по названию">
      `}}),o=e({tag:"button",classList:["search__button-remove","buttonReset"],params:{onclick:()=>{r.querySelector(".search__input").value="",o.remove()},type:"button",innerHTML:'<svg class="search__icon search__icon_remove"><use xlink:href="img/svg/sprite.svg#cartIconRemove"></use></svg>'}});return r.querySelector(".search__input").addEventListener("input",()=>{r.querySelector(".search__input").value===""?o.remove():r.append(o)}),{search:r,searchInput:r.querySelector(".search__input"),searchButtonRemove:o}}const J=[{titleSmall:"",price:"",imgUrl:""},{titleSmall:"",price:"",imgUrl:""},{titleSmall:"",price:"",imgUrl:""},{titleSmall:"",price:"",imgUrl:""},{titleSmall:"",price:"",imgUrl:""},{titleSmall:"",price:"",imgUrl:""}],{search:z,searchInput:x,searchButtonRemove:G}=D();function V(r){const o=e({tag:"section",classList:[b.hero]}),l=e({tag:"div",classList:["container",b.container],parent:o}),h=e({tag:"div",classList:[b.content],parent:l}),k=e({tag:"h1",classList:[b.title],params:{textContent:"все Кроссовки"},parent:h});h.append(z);const p=e({tag:"ul",classList:[b.catalog],parent:l});x.addEventListener("input",()=>{p.innerHTML="",v(r)}),G.addEventListener("click",()=>{p.innerHTML="",v(r)}),p.innerHTML="",v(r);function v(c=J){return c.filter(t=>t.titleSmall.toLowerCase().includes(x.value.toLowerCase())).forEach(t=>{const m=e({tag:"li",classList:["hero__card"],parent:p}),d=B({id:t.id,title:t.title,titleSmall:t.titleSmall,price:t.price,imgUrl:t.imgUrl,onAddToFavorite(){var a;const n=w.find(i=>i.id===t.id);if(n){(a=document.querySelector(`[data-card="${n.id}"]`))==null||a.querySelectorAll("use")[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg/sprite.svg#favorite");let i=w.indexOf(n);w.splice(i,1),fetch(`https://my-project-87c87-default-rtdb.europe-west1.firebasedatabase.app/favorite/${n.key||n.keyId}.json`,{method:"DELETE"});return}fetch("https://my-project-87c87-default-rtdb.europe-west1.firebasedatabase.app/favorite.json",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{w.push({id:t.id,keyId:i.name,title:t.title,titleSmall:t.titleSmall,price:t.price,imgUrl:t.imgUrl})})},onAddToCart(){const n=g.find(a=>a.id===t.id);if(n){document.querySelector(".nav__icon-text_total-price").textContent=`${Math.abs(g.reduce((i,u)=>i-u.price,n.price))} руб.`;let a=g.indexOf(n);g.splice(a,1),fetch(`https://my-project-87c87-default-rtdb.europe-west1.firebasedatabase.app/cart/${n.key||n.keyId}.json`,{method:"DELETE"});return}document.querySelector(".nav__icon-text_total-price").textContent=`${Math.abs(g.reduce((a,i)=>i.price+a,t.price))} руб.`,fetch("https://my-project-87c87-default-rtdb.europe-west1.firebasedatabase.app/cart.json",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{g.push({id:t.id,key:a.name,title:t.title,titleSmall:t.titleSmall,price:t.price,imgUrl:t.imgUrl})})}});m.append(d)})}return{hero:o,heroContainer:l,heroTitle:k,cardsList:p}}export{J as a,V as g};
